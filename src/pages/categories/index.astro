---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allPosts = await getCollection("blog");
const categories = [...new Set(allPosts.map((post) => post.data.category).filter(Boolean))];
const pageTitle = "分类索引";
---

<BaseLayout title={pageTitle}>
    <div class="container mx-auto max-w-4xl py-6 lg:py-10">
        <div class="flex flex-col items-start gap-4 md:flex-row md:justify-between md:gap-8">
            <div class="flex-1 space-y-4">
                <h1 class="inline-block font-bold text-4xl tracking-tight lg:text-5xl">
                    分类
                </h1>
                <p class="text-xl text-muted-foreground">
                    按分类浏览文章
                </p>
            </div>
        </div>
        <hr class="my-8" />
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {categories.map((category) => (
                <a
                    href={`/categories/${category}`}
                    class="group relative flex flex-col justify-between space-y-2 rounded-lg border p-6 hover:bg-muted/50 transition-colors"
                >
                    <h2 class="font-semibold text-xl group-hover:underline">
                        {category}
                    </h2>
                </a>
            ))}
            {categories.length === 0 && (
                 <p class="text-muted-foreground">暂无分类。</p>
            )}
        </div>
    </div>
</BaseLayout>
